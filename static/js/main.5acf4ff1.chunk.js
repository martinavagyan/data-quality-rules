(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{245:function(e,n,t){"use strict";t.r(n);var a=t(0),l=t.n(a),r=t(2),o=t.n(r),c=(t(44),t(7)),u=(t(45),t(4)),i=t(20),s=t(5),m=t(31),p=t.n(m),d=t(249),f=t(248),_=t(28),b=t(9),g=t(25);function v(){var e=Object(u.a)(["\n  color: darkblue;\n  background: rgb(248, 248, 248);\n  border-radius: 0px 8px 8px 0px;\n  text-align: left;\n  padding: 0px 30px;\n  font-size: 0.8em;\n  overflow: auto;\n"]);return v=function(){return e},e}function E(){var e=Object(u.a)(["\n  padding: 0px 30px 50px 30px;\n  color: darkblue;\n  text-align: left;\n  overflow: auto;\n  h4 {\n    padding: 0px;\n    margin: 0px;\n    color: #505050;\n    font-weight: normal;\n    margin-bottom: 5px;\n  }\n\n  .completness {\n    display: grid;\n    grid-template-columns: 1fr 2fr;\n    grid-gap: 8px;\n  }\n\n  .ruleGroup {\n    padding: 0.5rem;\n    border: 1px solid #1890ff;\n    border-radius: 4px;\n    background: rgba(180, 220, 255, 0.2);\n\n    .rule,\n    .ruleGroup {\n      margin-top: 0.5rem;\n      margin-left: 0.5rem;\n    }\n\n    .ruleGroup-combinators.betweenRules {\n      margin-top: 0.5rem;\n    }\n\n    .ruleGroup-notToggle {\n      margin-right: 0.5rem;\n    }\n  }\n"]);return E=function(){return e},e}function h(){var e=Object(u.a)(["\n  height: 70vh;\n  border: 1px solid lightgray;\n  border-radius: 8px;\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n"]);return h=function(){return e},e}function O(){var e=Object(u.a)(["\n  height: 30px;\n  background: #1890ff;\n  border-radius: 4px;\n  border: none;\n  color: white;\n  line-height: 1.5;\n  font-weight: bold;\n  cursor: pointer;\n  width: 200px;\n  margin: 30px;\n"]);return O=function(){return e},e}var y=s.a.button(O()),N=s.a.div(h()),A=s.a.div(E()),x=s.a.div(v()),L=function(e){var n=e.name,t=e.type;return{operators:[{name:"Is NULL",label:"Is NULL"},{name:"Is NOT NULL",label:"Is NOT NULL"},{name:"= ''",label:"Is EMPTY"},{name:"!= ''",label:"Is NOT EMPTY"},{name:"In",label:"In"},{name:"=",label:"="},{name:"!=",label:"!="},{name:"<",label:"<"},{name:">",label:">"},{name:"<=",label:"<="},{name:">=",label:">="}],fields:[{name:n,label:n},{name:"CHAR_LENGTH(".concat(n,")"),label:"CHAR_LENGTH(".concat(n,")")}],getControlElements:function(){return{valueEditor:function(e){var a=e.field,r=e.operator,o=e.handleOnChange,c=e.value,u=r.toLowerCase();return u.startsWith("is")||["= ''","!= ''"].includes(u)?"":"number"===t||a==="CHAR_LENGTH(".concat(n,")")?l.a.createElement("input",{value:c,onChange:o}):l.a.createElement("input",{onChange:o})}}}}},k=function(e,n,t,a){var l=function e(n,t){console.log(n);var a="",l={null:"IS NULL",notNull:"IS NOT NULL",contains:"LIKE"},r=n.rules,o=n.combinator;return r.forEach((function(n){var r=n.field,c=void 0===r?"":r,u=n.operator,i=void 0===u?"":u,s=n.value,m=n.rules,p=void 0===m?[]:m;console.log(c);var d=t&&""===a?"":o;a+=p.length?e(n):" ".concat(d," ").concat(c," ").concat(l[i]||i," ").concat(s," ")})),a}(n,!0).replace(/\s\s+/g," ").trim();a(t.map((function(n){return n.column===e?{column:n.column,rule:l}:n})))},j=function(e){var n=e.table,t=void 0===n?{columns:[]}:n,r=Object(a.useState)([]),o=Object(c.a)(r,2),u=o[0],s=o[1],m=Object(a.useState)([]),v=Object(c.a)(m,2),E=v[0],h=v[1],O=(Object(b.useToasts)().addToast,Object(a.useState)("")),j=Object(c.a)(O,2),I=j[0],S=j[1],T=Object(a.useState)(""),D=Object(c.a)(T,2),M=D[0],w=D[1];Object(a.useEffect)((function(){s(t.columns.map((function(e){return{column:e.name,rule:""}})))}),[t]);t.columns.reduce((function(e,n){return e[n.name]=n.type,e}),{});var C,R=(C={correctness_validations:u,completeness_validations:[{column:"OVER_ALL_COUNT",rule:"OVER_ALL_COUNT "+I+" "+M}],parent_children_constraints:E},{source_table:{name:"mock_data/family_sample.csv",id_column:"ID",output_correctness_table:"/tmp/mock_data/output/family_sample_test_correctness",output_completeness_table:"/tmp/mock_data/output/family_sample_test_completeness",output_comparison_table:"/tmp/mock_data/output/family_sample_test_comparison",unique_column_group_values_per_table:["ID","NAME","FAMILY_NAME","PARENT"],fuzzy_deduplication_distance:0},correctness_validations:Object(i.a)(C.correctness_validations),completeness_validations:Object(i.a)(C.completeness_validations),parent_children_constraints:Object(i.a)(C.parent_children_constraints),compare_related_tables_list:["test.diff_df","test.diff_df_2"]});return l.a.createElement(a.Fragment,null,0==t.columns.length&&l.a.createElement("h3",null," Please select table to add rules"),0!=t.columns.length&&l.a.createElement(N,null,l.a.createElement(A,null,l.a.createElement("h1",null,"Editor"),l.a.createElement("h3",null,"Correctness validations"),t.columns.map((function(e){return l.a.createElement("div",{key:e.name},l.a.createElement("h4",null,e.name,": [",e.type,"]"),l.a.createElement(p.a,{fields:L(e).fields,onQueryChange:function(n){return k(e.name,n,u,s)}}),l.a.createElement("br",null))})),l.a.createElement("h3",null,"Completeness validations"),l.a.createElement("h4",null,"Number of rows"),l.a.createElement("div",{class:"completness"},l.a.createElement(_.a,{onChange:function(e){return S(e.value)},options:[{value:">",label:">"},{value:">=",label:">="},{value:"=",label:"="},{value:"<",label:"<"},{value:"<=",label:"<="}]}),l.a.createElement("input",{type:"number",onChange:function(e){return w(e.target.value)}})),l.a.createElement("h3",null,"Parent of constraints"),t.columns.map((function(e){return l.a.createElement("div",{key:e.name},l.a.createElement("h4",null,e.name,": [",e.type,"]"),l.a.createElement(_.a,{isMulti:!0,onChange:function(n){var t=(n||[]).map((function(n){return{column:e.name,parent:n.value}})),a=E.filter((function(n){return n.column!=e.name}));h(t.concat(a))},options:t.columns.filter((function(n){return n.name!=e.name})).map((function(e){return{value:e.name,label:e.name}}))}),l.a.createElement("br",null))}))),l.a.createElement(x,null,l.a.createElement("h1",null,"Output"),l.a.createElement(d.a,{language:"JSON",style:f.a},JSON.stringify(R,null,2)))),0!=t.columns.length&&l.a.createElement(y,{onClick:function(){return fetch("api/validate",{body:JSON.stringify(g,null,2),method:"post"})}},"Submit"))},I=t(37),S=t(36),T=t.n(S);function D(){var e=Object(u.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  justify-items: center;\n  align-items: center;\n  font-weight: bold;\n  color: darkblue;\n"]);return D=function(){return e},e}function M(){var e=Object(u.a)(["\n  width: 60px;\n"]);return M=function(){return e},e}function w(){var e=Object(u.a)(["\n  height: 30px;\n  width: 100px;\n  background: ",";\n  color: ",";\n  border-radius: 4px;\n  border: 1px solid #1890ff;\n  line-height: 1.5;\n  font-weight: bold;\n  cursor: pointer;\n"]);return w=function(){return e},e}function C(){var e=Object(u.a)(["\n  height: 60px;\n  border-radius: 8px;\n  border: 1px solid lightgrey;\n  display: grid;\n  justify-items: center;\n  align-items: center;\n  grid-template-columns: repeat(3, 1fr);\n  margin-bottom: 40px;\n"]);return C=function(){return e},e}var R=s.a.div(C()),U=s.a.button(w(),(function(e){return"secondary"===e.type?"white":"#1890ff"}),(function(e){return"secondary"===e.type?"#1890ff":"white"})),P={name:"family_tree.csv",columns:[{name:"ID",type:"number"},{name:"NAME",type:"string"},{name:"FAMILY_NAME",type:"string"},{name:"PARENT",type:"string"},{name:"ADDRESS",type:"string"}]},G=s.a.img(M()),H=s.a.div(D()),Y={columns:[]},F=function(e){var n=e.onTableSelected,t=Object(b.useToasts)().addToast,r=Object(a.useState)(Object(I.a)({},Y)),o=Object(c.a)(r,2),u=o[0],i=o[1];return l.a.createElement(R,null,l.a.createElement(U,{onClick:function(){n(P),i(P),t("Succesfully uploaded",{appearance:"success",autoDismiss:!0,autoDismissTimeout:3e3})}},"Upload"),l.a.createElement("span",null,l.a.createElement("b",null,u.name||"No table selected")),l.a.createElement(H,null,"InteliValidata ",l.a.createElement(G,{src:T.a})))};var J=function(){var e=Object(a.useState)({columns:[]}),n=Object(c.a)(e,2),t=n[0],r=n[1];return l.a.createElement(b.ToastProvider,null,l.a.createElement("div",{className:"App"},l.a.createElement(F,{onTableSelected:function(e){return r(e)}}),l.a.createElement(j,{table:t})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},25:function(e){e.exports=JSON.parse('{"source_table":{"name":"lib/test/spark_validation_tests/common/mock_data/family_sample.csv","id_column":"ID","output_correctness_table":"lib/test/spark_validation_tests/common/mock_data/output/fs/family_sample_test_correctness","output_completeness_table":"lib/test/spark_validation_tests/common/mock_data/output/fs/family_sample_test_completeness","output_comparison_table":"lib/test/spark_validation_tests/common/mock_data/output/fs/family_sample_test_comparison","unique_column_group_values_per_table":["ID","NAME","FAMILY_NAME","PARENT"],"fuzzy_deduplication_distance":0},"correctness_validations":[{"column":"ID","rule":"ID is not null and ID != \'\' and ID != \'null\'"},{"column":"NAME","rule":"NAME is not null and NAME != \'\' and NAME != \'null\' and NAME like \'%ho%\'"},{"column":"FAMILY_NAME","rule":"FAMILY_NAME is not null and FAMILY_NAME in (\'Cha\', \'Pha\')"},{"column":"ADDRESS","rule":"ADDRESS is not null and ADDRESS != \'\' and ADDRESS != \'null\' and CHAR_LENGTH(ADDRESS) > 4"}],"completeness_validations":[{"column":"OVER_ALL_COUNT","rule":"OVER_ALL_COUNT <= 5"}],"parent_children_constraints":[{"column":"ID","parent":"PARENT"}],"compare_related_tables_list":["lib/test/spark_validation_tests/common/mock_data/family_sample_diff.csv"]}')},36:function(e,n,t){e.exports=t.p+"static/media/logo.50e8e5ec.png"},39:function(e,n,t){e.exports=t(245)},44:function(e,n,t){},45:function(e,n,t){}},[[39,1,2]]]);
//# sourceMappingURL=main.5acf4ff1.chunk.js.map