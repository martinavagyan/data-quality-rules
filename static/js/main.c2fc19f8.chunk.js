(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{229:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),l=t(4),o=t.n(l),c=(t(32),t(3)),u=(t(33),t(1)),i=t(14),s=t(2),m=t(20),d=t.n(m),p=t(233),f=t(232),b=t(18);function g(){var e=Object(u.a)(["\n  color: darkblue;\n  background: rgb(248, 248, 248);\n  border-radius: 0px 8px 8px 0px;\n  text-align: left;\n  padding: 0px 30px;\n  font-size: 0.8em;\n  overflow: auto;\n"]);return g=function(){return e},e}function h(){var e=Object(u.a)(["\n  padding: 0px 30px 50px 30px;\n  color: darkblue;\n  text-align: left;\n  overflow: auto;\n  h4 {\n    padding: 0px;\n    margin: 0px;\n    color: #505050;\n    font-weight: normal;\n    margin-bottom: 5px;\n  }\n\n  .completness {\n    display: grid;\n    grid-template-columns: 1fr 2fr;\n    grid-gap: 8px;\n  }\n\n  .ruleGroup {\n    padding: 0.5rem;\n    border: 1px solid #1890ff;\n    border-radius: 4px;\n    background: rgba(180, 220, 255, 0.2);\n\n    .rule,\n    .ruleGroup {\n      margin-top: 0.5rem;\n      margin-left: 0.5rem;\n    }\n\n    .ruleGroup-combinators.betweenRules {\n      margin-top: 0.5rem;\n    }\n\n    .ruleGroup-notToggle {\n      margin-right: 0.5rem;\n    }\n  }\n"]);return h=function(){return e},e}function v(){var e=Object(u.a)(["\n  height: 70vh;\n  border: 1px solid lightgray;\n  border-radius: 8px;\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n"]);return v=function(){return e},e}function E(){var e=Object(u.a)(["\n  height: 30px;\n  background: #1890ff;\n  border-radius: 4px;\n  border: none;\n  color: white;\n  line-height: 1.5;\n  font-weight: bold;\n  cursor: pointer;\n  width: 200px;\n  margin: 30px;\n"]);return E=function(){return e},e}var _=s.a.button(E()),O=s.a.div(v()),x=s.a.div(h()),y=s.a.div(g()),j=function(e){var n=e.name,t=e.type;return{operators:[{name:"Is NULL",label:"Is NULL"},{name:"Is NOT NULL",label:"Is NOT NULL"},{name:"= ''",label:"Is EMPTY"},{name:"!= ''",label:"Is NOT EMPTY"},{name:"In",label:"In"},{name:"=",label:"="},{name:"!=",label:"!="},{name:"<",label:"<"},{name:">",label:">"},{name:"<=",label:"<="},{name:">=",label:">="}],fields:[{name:n,label:n},{name:"CHAR_LENGTH(".concat(n,")"),label:"CHAR_LENGTH(".concat(n,")")}],getControlElements:function(){return{valueEditor:function(e){var a=e.field,l=e.operator,o=e.handleOnChange,c=e.value,u=l.toLowerCase();return u.startsWith("is")||["= ''","!= ''"].includes(u)?"":"number"===t||a==="CHAR_LENGTH(".concat(n,")")?r.a.createElement("input",{value:c,onChange:o}):r.a.createElement("input",{onChange:o})}}}}},N=function(e){var n=e.table,t=void 0===n?{columns:[]}:n,l=Object(a.useState)([]),o=Object(c.a)(l,2),u=o[0],s=o[1],m=Object(a.useState)([]),g=Object(c.a)(m,2),h=g[0],v=g[1],E=Object(a.useState)(""),N=Object(c.a)(E,2),w=N[0],L=N[1],T=Object(a.useState)(""),C=Object(c.a)(T,2),I=C[0],S=C[1];Object(a.useEffect)((function(){s(t.columns.map((function(e){return{column:e.name,rule:""}})))}),[t]);var k,A=t.columns.reduce((function(e,n){return e[n.name]=n.type,e}),{}),U=function(e,n){return A.field||"text"},G=(k={correctness_validations:u,completeness_validations:[{column:"OVER_ALL_COUNT",rule:"OVER_ALL_COUNT "+w+" "+I}],parent_children_constraints:h},{source_table:{name:"test.data_test",id_column:"GENERAL_ID",unique_per_cols:["GENERAL_ID","ULTIMATE_PARENT_ID"],fuzzy_deduplication_distance:1,output_correctness_table:"test.data_test_correctness",output_completeness_table:"test.data_test_completeness",output_comparison_table:"test.data_test_comparison"},correctness_validations:Object(i.a)(k.correctness_validations),completeness_validations:Object(i.a)(k.completeness_validations),parent_children_constraints:Object(i.a)(k.parent_children_constraints),compare_related_tables_list:["test.diff_df","test.diff_df_2"]});return r.a.createElement(a.Fragment,null,0==t.columns.length&&r.a.createElement("h3",null," Please select table to add rules"),0!=t.columns.length&&r.a.createElement(O,null,r.a.createElement(x,null,r.a.createElement("h1",null,"Editor"),r.a.createElement("h3",null,"Correctness validations"),t.columns.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("h4",null,e.name,": [",e.type,"]"),r.a.createElement(d.a,{fields:j(e).fields,getInputType:U,onQueryChange:function(n){return function(e,n,t,a){var r=function e(n,t){var a="",r={null:"IS NULL",notNull:"IS NOT NULL"},l=n.rules,o=n.combinator;return l.forEach((function(n){var l=n.field,c=void 0===l?"":l,u=n.operator,i=void 0===u?"":u,s=n.value,m=n.rules,d=t&&""===a?"":o;a+=(void 0===m?[]:m).length?e(n):" ".concat(d," ").concat(c," ").concat(r[i]||i," ").concat(s," ")})),a}(n,!0).replace(/\s\s+/g," ").trim();a(t.map((function(n){return n.column===e?{column:n.column,rule:r}:n})))}(e.name,n,u,s)}}),r.a.createElement("br",null))})),r.a.createElement("h3",null,"completeness validations"),r.a.createElement("h4",null,"Number of rows"),r.a.createElement("div",{class:"completness"},r.a.createElement(b.a,{onChange:function(e){return L(e.value)},options:[{value:">",label:">"},{value:">=",label:">="},{value:"=",label:"="},{value:"<",label:"<"},{value:"<=",label:"<="}]}),r.a.createElement("input",{type:"number",onChange:function(e){return S(e.target.value)}})),r.a.createElement("h3",null,"Parent of constraints"),t.columns.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("h4",null,e.name,": [",e.type,"]"),r.a.createElement(b.a,{isMulti:!0,onChange:function(n){var t=(n||[]).map((function(n){return{column:e.name,parent:n.value}})),a=h.filter((function(n){return n.column!=e.name}));v(t.concat(a))},options:t.columns.filter((function(n){return n.name!=e.name})).map((function(e){return{value:e.name,label:e.name}}))}),r.a.createElement("br",null))}))),r.a.createElement(y,null,r.a.createElement("h1",null,"Output"),r.a.createElement(p.a,{language:"JSON",style:f.a},JSON.stringify(G,null,2)))),0!=t.columns.length&&r.a.createElement(_,{onClick:function(){return fetch("/api/validate",{body:JSON.stringify(G,null,2),method:"POST"})}},"Submit"))},w=t(26),L=t(25),T=t.n(L);function C(){var e=Object(u.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  justify-items: center;\n  align-items: center;\n  font-weight: bold;\n  color: darkblue;\n"]);return C=function(){return e},e}function I(){var e=Object(u.a)(["\n  width: 60px;\n"]);return I=function(){return e},e}function S(){var e=Object(u.a)(["\n  height: 30px;\n  width: 100px;\n  background: ",";\n  color: ",";\n  border-radius: 4px;\n  border: 1px solid #1890ff;\n  line-height: 1.5;\n  font-weight: bold;\n  cursor: pointer;\n"]);return S=function(){return e},e}function k(){var e=Object(u.a)(["\n  height: 60px;\n  border-radius: 8px;\n  border: 1px solid lightgrey;\n  display: grid;\n  justify-items: center;\n  align-items: center;\n  grid-template-columns: repeat(3, 1fr);\n  margin-bottom: 40px;\n"]);return k=function(){return e},e}var A=s.a.div(k()),U=s.a.button(S(),(function(e){return"secondary"===e.type?"white":"#1890ff"}),(function(e){return"secondary"===e.type?"#1890ff":"white"})),G={name:"domino_grid.csv",columns:[{name:"gridId",type:"number"},{name:"name",type:"string"},{name:"isClient",type:"bool"}]},R=s.a.img(I()),H=s.a.div(C()),P={columns:[]},J=function(e){var n=e.onTableSelected,t=Object(a.useState)(Object(w.a)({},P)),l=Object(c.a)(t,2),o=l[0],u=l[1];return r.a.createElement(A,null,r.a.createElement(U,{onClick:function(){u(G),n(G)}},"Upload"),r.a.createElement("span",null,r.a.createElement("b",null,o.name||"No table selected")),r.a.createElement(H,null,"Validata ",r.a.createElement(R,{src:T.a})))};var M=function(){var e=Object(a.useState)({columns:[]}),n=Object(c.a)(e,2),t=n[0],l=n[1];return r.a.createElement("div",{className:"App"},r.a.createElement(J,{onTableSelected:function(e){return l(e)}}),r.a.createElement(N,{table:t}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},25:function(e,n,t){e.exports=t.p+"static/media/logo.50e8e5ec.png"},27:function(e,n,t){e.exports=t(229)},32:function(e,n,t){},33:function(e,n,t){}},[[27,1,2]]]);
//# sourceMappingURL=main.c2fc19f8.chunk.js.map