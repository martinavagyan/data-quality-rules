(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{244:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),l=t(2),o=t.n(l),c=(t(43),t(7)),u=(t(44),t(4)),i=t(20),s=t(5),m=t(30),d=t.n(m),p=t(248),f=t(247),b=t(27),g=t(9);function v(){var e=Object(u.a)(["\n  color: darkblue;\n  background: rgb(248, 248, 248);\n  border-radius: 0px 8px 8px 0px;\n  text-align: left;\n  padding: 0px 30px;\n  font-size: 0.8em;\n  overflow: auto;\n"]);return v=function(){return e},e}function h(){var e=Object(u.a)(["\n  padding: 0px 30px 50px 30px;\n  color: darkblue;\n  text-align: left;\n  overflow: auto;\n  h4 {\n    padding: 0px;\n    margin: 0px;\n    color: #505050;\n    font-weight: normal;\n    margin-bottom: 5px;\n  }\n\n  .completness {\n    display: grid;\n    grid-template-columns: 1fr 2fr;\n    grid-gap: 8px;\n  }\n\n  .ruleGroup {\n    padding: 0.5rem;\n    border: 1px solid #1890ff;\n    border-radius: 4px;\n    background: rgba(180, 220, 255, 0.2);\n\n    .rule,\n    .ruleGroup {\n      margin-top: 0.5rem;\n      margin-left: 0.5rem;\n    }\n\n    .ruleGroup-combinators.betweenRules {\n      margin-top: 0.5rem;\n    }\n\n    .ruleGroup-notToggle {\n      margin-right: 0.5rem;\n    }\n  }\n"]);return h=function(){return e},e}function E(){var e=Object(u.a)(["\n  height: 70vh;\n  border: 1px solid lightgray;\n  border-radius: 8px;\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n"]);return E=function(){return e},e}function _(){var e=Object(u.a)(["\n  height: 30px;\n  background: #1890ff;\n  border-radius: 4px;\n  border: none;\n  color: white;\n  line-height: 1.5;\n  font-weight: bold;\n  cursor: pointer;\n  width: 200px;\n  margin: 30px;\n"]);return _=function(){return e},e}var O=s.a.button(_()),x=s.a.div(E()),y=s.a.div(h()),j=s.a.div(v()),T=function(e){var n=e.name,t=e.type;return{operators:[{name:"Is NULL",label:"Is NULL"},{name:"Is NOT NULL",label:"Is NOT NULL"},{name:"= ''",label:"Is EMPTY"},{name:"!= ''",label:"Is NOT EMPTY"},{name:"In",label:"In"},{name:"=",label:"="},{name:"!=",label:"!="},{name:"<",label:"<"},{name:">",label:">"},{name:"<=",label:"<="},{name:">=",label:">="}],fields:[{name:n,label:n},{name:"CHAR_LENGTH(".concat(n,")"),label:"CHAR_LENGTH(".concat(n,")")}],getControlElements:function(){return{valueEditor:function(e){var a=e.field,l=e.operator,o=e.handleOnChange,c=e.value,u=l.toLowerCase();return u.startsWith("is")||["= ''","!= ''"].includes(u)?"":"number"===t||a==="CHAR_LENGTH(".concat(n,")")?r.a.createElement("input",{value:c,onChange:o}):r.a.createElement("input",{onChange:o})}}}}},N=function(e){var n=e.table,t=void 0===n?{columns:[]}:n,l=Object(a.useState)([]),o=Object(c.a)(l,2),u=o[0],s=o[1],m=Object(a.useState)([]),v=Object(c.a)(m,2),h=v[0],E=v[1],_=Object(g.useToasts)().addToast,N=Object(a.useState)(""),w=Object(c.a)(N,2),L=w[0],C=w[1],S=Object(a.useState)(""),I=Object(c.a)(S,2),k=I[0],A=I[1];Object(a.useEffect)((function(){s(t.columns.map((function(e){return{column:e.name,rule:""}})))}),[t]);var U,G=t.columns.reduce((function(e,n){return e[n.name]=n.type,e}),{}),R=function(e,n){return G.field||"text"},D=(U={correctness_validations:u,completeness_validations:[{column:"OVER_ALL_COUNT",rule:"OVER_ALL_COUNT "+L+" "+k}],parent_children_constraints:h},{source_table:{name:"test.data_test",id_column:"GENERAL_ID",unique_per_cols:["GENERAL_ID","ULTIMATE_PARENT_ID"],fuzzy_deduplication_distance:1,output_correctness_table:"test.data_test_correctness",output_completeness_table:"test.data_test_completeness",output_comparison_table:"test.data_test_comparison"},correctness_validations:Object(i.a)(U.correctness_validations),completeness_validations:Object(i.a)(U.completeness_validations),parent_children_constraints:Object(i.a)(U.parent_children_constraints),compare_related_tables_list:["test.diff_df","test.diff_df_2"]});return r.a.createElement(a.Fragment,null,0==t.columns.length&&r.a.createElement("h3",null," Please select table to add rules"),0!=t.columns.length&&r.a.createElement(x,null,r.a.createElement(y,null,r.a.createElement("h1",null,"Editor"),r.a.createElement("h3",null,"Correctness validations"),t.columns.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("h4",null,e.name,": [",e.type,"]"),r.a.createElement(d.a,{fields:T(e).fields,getInputType:R,onQueryChange:function(n){return function(e,n,t,a){var r=function e(n,t){var a="",r={null:"IS NULL",notNull:"IS NOT NULL"},l=n.rules,o=n.combinator;return l.forEach((function(n){var l=n.field,c=void 0===l?"":l,u=n.operator,i=void 0===u?"":u,s=n.value,m=n.rules,d=t&&""===a?"":o;a+=(void 0===m?[]:m).length?e(n):" ".concat(d," ").concat(c," ").concat(r[i]||i," ").concat(s," ")})),a}(n,!0).replace(/\s\s+/g," ").trim();a(t.map((function(n){return n.column===e?{column:n.column,rule:r}:n})))}(e.name,n,u,s)}}),r.a.createElement("br",null))})),r.a.createElement("h3",null,"completeness validations"),r.a.createElement("h4",null,"Number of rows"),r.a.createElement("div",{class:"completness"},r.a.createElement(b.a,{onChange:function(e){return C(e.value)},options:[{value:">",label:">"},{value:">=",label:">="},{value:"=",label:"="},{value:"<",label:"<"},{value:"<=",label:"<="}]}),r.a.createElement("input",{type:"number",onChange:function(e){return A(e.target.value)}})),r.a.createElement("h3",null,"Parent of constraints"),t.columns.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("h4",null,e.name,": [",e.type,"]"),r.a.createElement(b.a,{isMulti:!0,onChange:function(n){var t=(n||[]).map((function(n){return{column:e.name,parent:n.value}})),a=h.filter((function(n){return n.column!=e.name}));E(t.concat(a))},options:t.columns.filter((function(n){return n.name!=e.name})).map((function(e){return{value:e.name,label:e.name}}))}),r.a.createElement("br",null))}))),r.a.createElement(j,null,r.a.createElement("h1",null,"Output"),r.a.createElement(p.a,{language:"JSON",style:f.a},JSON.stringify(D,null,2)))),0!=t.columns.length&&r.a.createElement(O,{onClick:function(){fetch("/api/validate",{body:JSON.stringify(D,null,2),method:"POST"}),_("Succesfully submited",{appearance:"success",autoDismiss:!0,autoDismissTimeout:3e3})}},"Submit"))},w=t(36),L=t(35),C=t.n(L);function S(){var e=Object(u.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  justify-items: center;\n  align-items: center;\n  font-weight: bold;\n  color: darkblue;\n"]);return S=function(){return e},e}function I(){var e=Object(u.a)(["\n  width: 60px;\n"]);return I=function(){return e},e}function k(){var e=Object(u.a)(["\n  height: 30px;\n  width: 100px;\n  background: ",";\n  color: ",";\n  border-radius: 4px;\n  border: 1px solid #1890ff;\n  line-height: 1.5;\n  font-weight: bold;\n  cursor: pointer;\n"]);return k=function(){return e},e}function A(){var e=Object(u.a)(["\n  height: 60px;\n  border-radius: 8px;\n  border: 1px solid lightgrey;\n  display: grid;\n  justify-items: center;\n  align-items: center;\n  grid-template-columns: repeat(3, 1fr);\n  margin-bottom: 40px;\n"]);return A=function(){return e},e}var U=s.a.div(A()),G=s.a.button(k(),(function(e){return"secondary"===e.type?"white":"#1890ff"}),(function(e){return"secondary"===e.type?"#1890ff":"white"})),R={name:"domino_grid.csv",columns:[{name:"gridId",type:"number"},{name:"name",type:"string"},{name:"isClient",type:"bool"}]},D=s.a.img(I()),P=s.a.div(S()),H={columns:[]},J=function(e){var n=e.onTableSelected,t=Object(g.useToasts)().addToast,l=Object(a.useState)(Object(w.a)({},H)),o=Object(c.a)(l,2),u=o[0],i=o[1];return r.a.createElement(U,null,r.a.createElement(G,{onClick:function(){n(R),i(R),t("Succesfully uploaded",{appearance:"success",autoDismiss:!0,autoDismissTimeout:3e3})}},"Upload"),r.a.createElement("span",null,r.a.createElement("b",null,u.name||"No table selected")),r.a.createElement(P,null,"Validata ",r.a.createElement(D,{src:C.a})))};var M=function(){var e=Object(a.useState)({columns:[]}),n=Object(c.a)(e,2),t=n[0],l=n[1];return r.a.createElement(g.ToastProvider,null,r.a.createElement("div",{className:"App"},r.a.createElement(J,{onTableSelected:function(e){return l(e)}}),r.a.createElement(N,{table:t})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},35:function(e,n,t){e.exports=t.p+"static/media/logo.50e8e5ec.png"},38:function(e,n,t){e.exports=t(244)},43:function(e,n,t){},44:function(e,n,t){}},[[38,1,2]]]);
//# sourceMappingURL=main.dee5b3a6.chunk.js.map